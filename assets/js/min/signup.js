let widgetId=null,turnstileToken="";const signupForm=document.getElementById("signupForm");function initTurnstile(){window.turnstile?document.getElementById("turnstile-container")&&(widgetId=turnstile.render("#turnstile-container",{sitekey:"0x4AAAAAACDFfOKm7uvwfqiR",theme:"dark",callback:function(e){turnstileToken=e}})):setTimeout(initTurnstile,500)}function resetTurnstile(){window.turnstile&&null!==widgetId&&(turnstile.reset(widgetId),turnstileToken="")}document.addEventListener("DOMContentLoaded",(function(){initTurnstile()})),signupForm.addEventListener("submit",(async function(e){if(e.preventDefault(),!turnstileToken)return void notify("Please verify you are a human","error");if(!document.getElementById("TOSCheckbox").checked)return void notify("Please agree to the ToS","error");var t=document.getElementById("username").value,n=document.getElementById("email").value,i=document.getElementById("password").value;console.log(t,i,n);const o=await fetch("/api/createAccount",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:i,email:n,turnstile:turnstileToken})});if(!o.ok)return void notify("Fetch request failed");const r=await o.json();"success"==r.status?(notify(r.message,"success"),setTimeout((()=>{window.location.href="/"}),2e3)):notify(r.message,"error"),resetTurnstile()}));