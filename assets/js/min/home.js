function loadUserImages(){fetch("/api/getUserImages").then((function(e){return e.json()})).then((function(e){if("success"===e.status){var n=document.getElementById("usernameDisplay");n&&(n.textContent="@"+e.username),renderImages(e.images)}else window.location.href="/signup"})).catch((function(e){console.error("Error loading images:",e),window.location.href="/signup"}))}function renderImages(e){var n=document.getElementById("imageContainer");n&&(n.innerHTML="",e&&0!==e.length?e.forEach((function(e){var t=document.createElement("div");t.className="postContainer",t.id="image-"+e.id;var o=window.location.host+e.path;t.innerHTML='<div class="imageContainer"><img loading="lazy" src="'+escapeHtml(e.path)+'" alt="'+escapeHtml(e.name)+'"></div><div class="controlContainer"><button onclick="copyText(\''+escapeHtml(o)+'\')">Copy Link</button><button class="delete-btn" onclick="deleteImage('+e.id+')">Delete</button><p>Uploaded: '+escapeHtml(e.uploadDate)+"</p></div>",n.appendChild(t)})):n.innerHTML='<p class="empty-state">No images uploaded yet :( <br><a href="/">upload one!</a></p>')}function copyText(e){navigator.clipboard.writeText(e).then((function(){notify("Copied image!","success")})).catch((function(){notify("Failed to copy","error")}))}function deleteImage(e){var n=new FormData;n.append("image_id",e),fetch("/api/deleteImage",{method:"POST",body:n}).then((function(e){return e.json()})).then((function(n){if(n.success){var t=document.getElementById("image-"+e);t&&(t.style.display="none"),notify("Image deleted!","info")}else notify(n.message||"Failed to delete image","error")})).catch((function(e){console.error("AJAX Error:",e),notify("An error occurred, please try again.","error")}))}function escapeHtml(e){if(!e)return"";var n=document.createElement("div");return n.textContent=e,n.innerHTML}document.addEventListener("DOMContentLoaded",(function(){loadUserImages()}));