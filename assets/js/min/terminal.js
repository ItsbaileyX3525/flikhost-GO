let validationKey="";const formatter=new Intl.ListFormat("en",{style:"long",type:"conjunction"});function rainbow(e){return lolcat.rainbow((function(e,t){return e=$.terminal.escape_brackets(e),`[[;${hex(t)};]${e}]`}),e).join("\n")}function hex(e){return"#"+[e.red,e.green,e.blue].map((e=>e.toString(16).padStart(2,"0"))).join("")}function sleep(e){return new Promise((t=>setTimeout(t,e)))}async function remove_image_from_db(e){const t={image_id:e,server:validationKey};try{const e=await $.ajax({url:"/api/deleteImage",type:"POST",data:t,dataType:"json"});return{success:e.success,ban_response:e.message}}catch(e){return console.error("AJAX error:",e),{success:!1,ban_response:"Error removing image."}}}async function getValidationKey(e){data={gimmieServerKey:e};try{const e=await $.ajax({url:"/api/validateKey",type:"POST",data:data,dataType:"json"});return e.success?{success:e.success,vaildationkey:e.key}:{success:e.success,error:e.message}}catch(e){return console.error("AJAX error:",e),{success:!1,ban_response:"Error getting validation key."}}}const commands={async login(e){term.echo(`[[;${hex({red:255,green:165,blue:0})};]Attempting to login...]`);const t=await getValidationKey(e);await sleep(1e3),t.success?(response=`[[;${hex({red:124,green:252,blue:0})};]Retrieved validation key: ]`,validationKey=t.vaildationkey):response=`[[;${hex({red:255,green:0,blue:0})};]Failed to get vaildation key. Error: ${t.error} Current key: ]`,term.echo(response+validationKey)},help(){term.echo(`List of available commands: ${help}`)},echo(e){term.echo(`[[;${hex({red:255,green:165,blue:0})};]${e}]`)},check_key(){term.echo(`[[;${hex({red:255,green:165,blue:0})};]Current validation key: ]${validationKey}`)},async cowsay(e){await fetch(`/api/proxy?url=${encodeURIComponent("https://cowsay.morecode.org/say")}&message=${encodeURIComponent(e)}&format=${encodeURIComponent("json")}`).then((e=>e.text())).then((e=>{let t=JSON.parse(e);term.echo(t.cow)})).then((e=>console.log(e))).catch((e=>console.error("Error fetching data:",e)))},async kanye(){await fetch("https://api.kanye.rest/").then((e=>e.json())).then((e=>term.echo(e.quote))).catch((e=>console.error("Error fetching data:",e)))},lolcat(e){const t=rainbow(e);term.echo(t)},async figlet(e){try{const t="/assets/fonts/big.flf",r=await fetch(t);if(!r.ok)return void term.echo("Error loading font");const o=await r.text();figlet.parseFont("big",o),figlet.text(e,{font:"big"},(function(t,r){if(t)return console.log("Figlet error, falling back to plain text"),void term.echo(e);term.echo(r)}))}catch(t){console.error("Figlet error:",t),term.echo(e)}},async cat_fact(){await fetch("https://meowfacts.herokuapp.com/").then((e=>e.json())).then((e=>term.echo(e.data[0]))).catch((e=>console.error("Error fetching data:",e)))},async remove_image(e){term.echo(`[[;${hex({red:255,green:165,blue:0})};]Attempting to remove image, ${e}...]`);const t=await remove_image_from_db(e);await sleep(1e3),t.success?response=`[[;${hex({red:124,green:252,blue:0})};]removed image, ${e} from database!]`:response=`[[;${hex({red:255,green:0,blue:0})};]Failed to remove image. Error: ${t.ban_response}]`,term.echo(response)}},command_list=Object.keys(commands),help=formatter.format(command_list),term=$("body").terminal(commands);